Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactNativeSvg=_interopRequireWildcard(require("react-native-svg"));var _jsxRuntime=require("react/jsx-runtime");var _jsxFileName="F:\\react-native\\PrismTouch\\src\\components\\ProgressCircle.tsx";function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap(),t=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r;})(e);}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u];}return n.default=e,t&&t.set(e,n),n;}var AnimatedTextInput=_reactNative.Animated.createAnimatedComponent(_reactNative.TextInput);function ProgressCicle(_ref){var percent=_ref.percent,_ref$radius=_ref.radius,radius=_ref$radius===void 0?30:_ref$radius,_ref$strokeWidth=_ref.strokeWidth,strokeWidth=_ref$strokeWidth===void 0?6:_ref$strokeWidth,_ref$duration=_ref.duration,duration=_ref$duration===void 0?500:_ref$duration,_ref$color=_ref.color,color=_ref$color===void 0?'tomato':_ref$color,textColor=_ref.textColor,_ref$max=_ref.max,max=_ref$max===void 0?100:_ref$max;var animated=_react.default.useRef(new _reactNative.Animated.Value(0)).current;var circleRef=_react.default.useRef();var inputRef=_react.default.useRef();var circumference=2*Math.PI*radius;var halfCircle=radius+strokeWidth;var animation=function animation(toValue){return _reactNative.Animated.timing(animated,{delay:1000,toValue:toValue,duration:duration,useNativeDriver:true,easing:_reactNative.Easing.out(_reactNative.Easing.ease)}).start(function(){});};_react.default.useEffect(function(){animation(Number(percent));animated.addListener(function(v){var maxPerc=100*v.value/max;var strokeDashoffset=circumference-circumference*maxPerc/100;if(v.value===100){return animated.removeAllListeners();}if(inputRef!=null&&inputRef.current){inputRef.current.setNativeProps({text:`${Math.round(v.value)}%`});}if(circleRef!=null&&circleRef.current){circleRef.current.setNativeProps({strokeDashoffset:strokeDashoffset});}});return function(){animated.removeAllListeners();};},[percent]);var renderProgress=function renderProgress(){if(Number(percent)<50){return'#F24564';}if(Number(percent)>=50&&Number(percent)<60){return'#F8C917';}if(Number(percent)>=60){return'#3ED684';}};return(0,_jsxRuntime.jsxs)(_reactNative.View,{style:{width:radius*2,height:radius*2},children:[(0,_jsxRuntime.jsx)(_reactNativeSvg.default,{height:radius*2,width:radius*2,viewBox:`0 0 ${halfCircle*2} ${halfCircle*2}`,children:(0,_jsxRuntime.jsxs)(_reactNativeSvg.G,{rotation:"-90",origin:`${halfCircle}, ${halfCircle}`,children:[(0,_jsxRuntime.jsx)(_reactNativeSvg.Circle,{ref:circleRef,cx:"50%",cy:"50%",r:radius,fill:"transparent",stroke:renderProgress(),strokeWidth:strokeWidth,strokeLinecap:"round",strokeDashoffset:circumference,strokeDasharray:circumference}),(0,_jsxRuntime.jsx)(_reactNativeSvg.Circle,{cx:"50%",cy:"50%",r:radius,fill:"transparent",stroke:'#B5B2C1',strokeWidth:strokeWidth,strokeLinejoin:"round",strokeOpacity:".1"})]})}),(0,_jsxRuntime.jsx)(AnimatedTextInput,{ref:inputRef,underlineColorAndroid:"transparent",editable:false,defaultValue:"0",style:[_reactNative.StyleSheet.absoluteFillObject,{fontSize:11,color:textColor!=null?textColor:color,fontWeight:'400',textAlign:'center'}]})]});}var _default=exports.default=(0,_react.memo)(ProgressCicle);